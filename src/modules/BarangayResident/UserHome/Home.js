/* eslint-disable jsx-a11y/iframe-has-title */
import React, { useState, useEffect } from 'react'
import './About.css';
import Helm from '../../../components/Helmet/Helmet';
import Axios from 'axios'
import './Home.css';
import './../../../styles/Root.css'
import OfficerCards from '../../../components/Cards/Officers/OfficerCards';
import ScrollToTop from '../../../components/ScrollToTop/ScrollToTop';
import Footer from '../../../components/Footer/Footer';
import Navbar from '../../../components/Navbar/Navbar';
import loading from '../../../assets/icons/loading.png';
import LoginAuthPop from '../../../components/Dialog/LoginAuthPop';
import { FaFile, FaGavel, FaBook, FaComments, FaList, FaQuestionCircle, FaCalendar, FaUserCircle } from 'react-icons/fa'
import { BsPencilSquare } from 'react-icons/bs'
const Home = () => {
    Axios.defaults.withCredentials = true;
    const [resident_id, setResidentId] = useState(""), [errorDialog, setErrorDialog] = useState({ isOpen: !1, title: "", subtitle: "", noButton: "" }), [fetched, setFetched] = useState(!1), [brgyinfo, setBrgyInfo] = useState([]), [official, setOffical] = useState([]), [chairman, setChairman] = useState([]);
    useEffect(() => { const ac = new AbortController(); setFetched(!0); Promise.all([Axios.get("http://localhost:3001/login").then((response) => { if (response.data.loggedIn === !0) { setResidentId(response.data.user[0].resident_id) } }), Axios.get("http://localhost:3001/GetPunongBarangay").then((response) => { setChairman(response.data) }), Axios.get("http://localhost:3001/GetBarangayOfficials").then((response) => { setOffical(response.data) }), Axios.get("http://localhost:3001/GetBarangayInformation").then((response) => { setBrgyInfo(response.data) })]).then(() => setFetched(!1)).catch(ex => console.error(ex)); return () => ac.abort() }, [])
    function BarangayDocuments(e) { e.preventDefault(); window.location = '/Barangay-Certificates' } function FileReport(e) { e.preventDefault(); window.location = '/EmergencyIncidentReport' } function ComplaintReport(e) { e.preventDefault(); window.location = '/Submit-Complain-Report' } function ReserveRequest(e) { e.preventDefault(); window.location = '/RequestUtilities' } function FAQs(e) { e.preventDefault(); window.location = '/FAQs' } function Feedbacks(e) { e.preventDefault(); window.location = '/Feedbacks' } function Announcement(e) { e.preventDefault(); window.location = '/announcements' } function ProgramsEvents(e) { e.preventDefault(); window.location = '/brgy-programs&events' } function MyProfile(e) { e.preventDefault(); window.location = '/MyProfile' } function MyApplication(e) { e.preventDefault(); window.location = '/MyApplication' }
    return (
        <div className="home_body">
            <Helm title={`Home | One Barangay`} />
            <Navbar />
            <LoginAuthPop errorDialog={errorDialog} setErrorDialog={setErrorDialog} />
            <div className="home_main_container"> <div className="loading_container">{fetched && <img src={loading} alt={loading} className="loading_icon" />}</div><ScrollToTop /> <div className='home_wrapper'> <div className="home_chairman_message_container" > <div className="chairman_pic">{chairman.map((row) => (<img id="uploaded-image" src={`data:image/jpeg;base64,${Buffer.from(row.official_image)}`} draggable={!1} alt="uploaded-img" />))}</div><div className="chairman_message"> <div className="chairman_message_bg">{brgyinfo.map((row) => (<img id="uploaded-image" src={`data:image/jpeg;base64,${Buffer.from(row.brgy_image)}`} draggable={!1} alt="uploaded-img" className="message_bg" />))}</div><h1>Welcome Message of Barangay Chairman</h1> <p>The Municipality of Pura is a fourth class municipality found at the northeastern side of Tarlac Province abutting the municipality of Guimba in the Province of Nueva Ecija. As its name implies, everything in here is pure and natural. It is a growing community located in the mid-northern part of Central Luzon's extensive central plains. It is within the cross road of three major thoroughfares, the Tarlac-Pangasinan-La Union Expressway, the Gerona-Guimba Road and the East-West Coast Road (Dingalan-Lingayen Highway) which brings a great deal for economic growth. Along with this, PURA is envisioned to be a sustainable community characterized by a mix of land uses that combines utility and aesthetics that gives an ambience that soothes the spirit, invites high productivity, and encourages healthy living. We encourage everyone to visit and witness the pureness of our municipality. Come and enjoy the beauty of our place and experience our “Puranian” cordiality. <br /> <br />{chairman.map((row) => (`Hon ${row.first_name + " " + row.middle_name + " " + row.last_name + " " + row.suffix}`))}<br />{chairman.map((row) => (row.position))}{", "}{brgyinfo.map((row) => (row.brgy_barangay + " " + row.brgy_zone))}</p></div></div></div><div className="about_main_container"> <section className="about_section"> <div className='about_2nd_contianer'> <div className='about_row'> <div className='col-md-12 mb-5 about_textContent'> <h3 className='about_heading'>Vision , Mission</h3> <div className='about_underline'></div></div><div className='vision_mission'> <div className='vision'> <h3 className='vm_titles'>Our Vision</h3> <p>“We envision Barangay 407 Zone 42 District 4 to be more developed, discipline, orderly, morally, and socially progressive community.”</p></div><div className='mission'> <h3 className='vm_titles'>Our Mission</h3> <p>“To improve the security, prosperity and well being of the community by providing a distinct and quality public service and to ensure that all constituents will be given access to government assistance and services.”</p></div></div></div></div></section> <div className="elected_officials_container"> <div className="officials_container"> <center> <h1 className="officials_container_title">Barangay Officials</h1> </center> <div className='about_underline'></div><div className="officerCard_container"> <body className="officerCard"> <div className="officerCard_grid">{official.map((row) => (<OfficerCards img={row.official_image} name={row.first_name + " " + row.middle_name + " " + row.last_name + " " + row.suffix} position={row.position} />))}</div></body> </div></div></div><div className="visitUs_container"> <div> <center><h1 className="title">Visit Us</h1></center> </div><div className="visitUs_addressContainer">{brgyinfo.map((row) => (<><h2>{row.brgy_barangay + " " + row.brgy_zone + " " + row.brgy_district}</h2><h2>{row.brgy_cityDistrict + ", " + row.brgy_city}</h2><h2>{row.brgy_buildingNo + " " + row.brgy_street + " " + row.brgy_cityDistrict}</h2><h2>Office Hours:Monday-Friday,8am-5pm</h2></>))}</div><div className="location_container"> <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3860.9080007478474!2d120.99244001516024!3d14.604316389800081!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3397c9fc11a6ceb3%3A0x9d4220dade0140ab!2sNational%20University-Manila!5e0!3m2!1sen!2sph!4v1599576733648!5m2!1sen!2sph" > </iframe> </div></div>{!resident_id ? <div className='notVerified_notice'> <p><span>NOTE: </span>Complete your My Profile or Contact the Barangay to verify your information and get full access to our features!</p></div> : ""}<div className="mobileHomeMain_cards" >{resident_id ? <> <div className="mobileHomeCard" onClick={BarangayDocuments}> <i className="fa_icons_container"><FaFile className='fa_icons' /></i> <div className="userCard_inner"> <p className="text-primary-p">Barangay Document</p></div></div><div className="mobileHomeCard" onClick={FileReport}> <i className="fa_icons_container"><FaGavel className='fa_icons' /></i> <div className="userCard_inner"> <p className="text-primary-p">File Report</p></div></div><div className="mobileHomeCard" onClick={ComplaintReport}> <i className="fa_icons_container"><BsPencilSquare className='fa_icons' /></i> <div className="userCard_inner"> <p className="text-primary-p">Complaint Report</p></div></div><div className="mobileHomeCard" onClick={ReserveRequest}> <i className="fa_icons_container"><FaBook className='fa_icons' /></i> <div className="userCard_inner"> <p className="text-primary-p">Reserve & Request</p></div></div><div className="mobileHomeCard" onClick={Feedbacks}> <i className="fa_icons_container"><FaComments className='fa_icons' /></i> <div className="userCard_inner"> <p className="text-primary-p">Feedback & Suggestion</p></div></div><div className="mobileHomeCard" onClick={MyApplication}> <i className="fa_icons_container"><FaList className='fa_icons' /></i> <div className="userCard_inner"> <p className="text-primary-p">My Application</p></div></div></> : ""}<div className="mobileHomeCard" onClick={FAQs}> <i className="fa_icons_container"><FaQuestionCircle className='fa_icons' /></i> <div className="userCard_inner"> <p className="text-primary-p">FAQs</p></div></div><div className="mobileHomeCard" onClick={Announcement}> <i className="fa_icons_container"><FaCalendar className='fa_icons' /></i> <div className="userCard_inner"> <p className="text-primary-p">Announcement</p></div></div><div className="mobileHomeCard" onClick={ProgramsEvents}> <i className="fa_icons_container"><FaCalendar className='fa_icons' /></i> <div className="userCard_inner"> <p className="text-primary-p">Programs & Events</p></div></div><div className="mobileHomeCard" onClick={MyProfile}> <i className="fa_icons_container"><FaUserCircle className='fa_icons' /></i> <div className="userCard_inner"> <p className="text-primary-p">My Profile</p></div></div></div></div></div>
            {window.innerWidth <= 600 ? "" : <Footer />}
        </div>
    )
}
export default Home